"use strict";var zIndexCounter,origin,waitForUser,pos=[];function setUpPage(){document.querySelector("nav ul li:first-of-type").addEventListener("click",loadSetup,!1),document.querySelector("nav ul li:last-of-type").addEventListener("click",loadDirections,!1);var e=document.querySelectorAll("#room div");zIndexCounter=e.length+1;for(var t=0;t<e.length;t++)e[t].style.msTouchAction="none",e[t].style.touchAction="none",e[t].addEventListener("mspointerdown",startDrag,!1),e[t].addEventListener("pointerdown",startDrag,!1),e[t].addEventListener?(e[t].addEventListener("mousedown",startDrag,!1),e[t].addEventListener("touchstart",startDrag,!1)):movableItems[t].attachEvent&&e[t].attachEvent("onmousedown",startDrag)}function loadSetup(){document.querySelector("nav ul li:first-of-type").className="current",document.querySelector("nav ul li:last-of-type").className="",document.getElementById("setup").style.display="block",document.getElementById("location").style.display="none",location.search=""}function loadDirections(e){if(document.querySelector("nav ul li:first-of-type").className="",document.querySelector("nav ul li:last-of-type").className="current",document.getElementById("setup").style.display="none",document.getElementById("location").style.display="block","object"!=typeof google){var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCs7JMUiu-WDdJ1hPYDg0QKDuTRI5YDXD8&callback=geoTest",document.body.appendChild(t)}}function geoTest(){waitForUser=setTimeout(fail,1e4),navigator.geolocation?navigator.geolocation.getCurrentPosition(createDirections,fail,{timeout:1e4}):fail()}function createDirections(e){clearTimeout(waitForUser),console.log("Longitude: "+e.coords.longitude),console.log("Latitude: "+e.coords.latitude);var t=e.coords.latitude,o=e.coords.longitude,n={center:new google.maps.LatLng(t,o),zoom:12};new google.maps.Map(document.getElementById("map"),n)}function fail(){document.getElementById("map").innerHTML="Unable to access your current location"}function startDrag(e){this.style.zIndex=zIndexCounter,zIndexCounter++,"mousedown"!==e.type?(e.preventDefault(),this.addEventListener("touchmove",moveDrag,!1),this.addEventListener("mspointermove",moveDrag,!1),this.addEventListener("pointermove",moveDrag,!1),this.addEventListener("touchend",removeTouchListener,!1),this.addEventListener("mspointerup",removeTouchListener,!1),this.addEventListener("pointerup",removeTouchListener,!1)):(this.addEventListener("mousemove",moveDrag,!1),this.addEventListener("mouseup",removeDragListener,!1)),pos=[this.offsetLeft,this.offsetTop],origin=getCoords(e)}function moveDrag(e){var t=getCoords(e),o=t[0]-origin[0],n=t[1]-origin[1];this.style.left=pos[0]+o+"px",this.style.top=pos[1]+n+"px"}function getCoords(e){var t=[];if(e.targetTouches&&e.targetTouches.length){var o=e.targetTouches[0];t[0]=o.clientX,t[1]=o.clientY}else t[0]=e.clientX,t[1]=e.clientY;return t}function removeDragListener(){this.removeEventListener("mousemove",moveDrag,!1),this.removeEventListener("mouseup",removeDragListener,!1)}function removeTouchListener(){this.removeEventListener("touchmove",moveDrag,!1),this.removeEventListener("mspointermove",moveDrag,!1),this.removeEventListener("pointermove",moveDrag,!1),this.removeEventListener("touchend",removeTouchListener,!1),this.removeEventListener("mspointerup",removeTouchListener,!1),this.removeEventListener("pointerup",removeDragListener,!1)}window.addEventListener("load",setUpPage,!1);